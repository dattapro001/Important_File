============================================================
    üöÄ PATHCHORCHA VPS DEPLOYMENT & COMMAND CHEATSHEET
============================================================

1. üìÇ EDITING CONFIGURATION FILES
------------------------------------------------------------
# Backend Files
nano /var/www/pathchorcha/Backend/.env
nano /var/www/pathchorcha/Backend/src/server.ts
nano /var/www/pathchorcha/Backend/Dockerfile
nano /var/www/pathchorcha/Backend/prisma/schema.prisma

# Frontend Files
nano /var/www/pathchorcha/Frontend/.env.production
nano /var/www/pathchorcha/Frontend/next.config.ts

# Nginx Config
nano /var/www/pathchorcha/nginx/default.conf


2. üîÑ DEPLOYMENT SCENARIOS (After git pull)
------------------------------------------------------------
# Scenario 1: Normal Code Change (UI or Logic)
git pull
docker compose up -d --build

# Scenario 2: Database/Prisma Schema Change (Important!)
# Use this when you add tables or columns
git pull
docker compose up -d --build
docker compose exec backend npx prisma migrate deploy

# Scenario 3: Environment or Config Change (.env, Dockerfile)
git pull
docker compose down
docker compose up -d --build


3. üõ† DOCKER MANAGEMENT COMMANDS
------------------------------------------------------------
cd /var/www/pathchorcha

# Restart all services
docker compose restart

# Only rebuild Backend or Frontend
docker compose up -d --build backend
docker compose up -d --build frontend

# View Live Logs
docker compose logs -f --tail=200 backend
docker compose logs -f --tail=200 frontend


4. üíé PRISMA STUDIO (Database GUI Access)
------------------------------------------------------------
# Step 1: Inside VPS (Enter Backend Container)
docker exec -it pathchorcha_backend sh
npx prisma studio --hostname 0.0.0.0 --port 51212

# Step 2: From Local PC Terminal (SSH Tunneling)
ssh -N -L 51212:127.0.0.1:51212 root@72.61.114.217

# Step 3: Open Browser
URL: http://localhost:51212/


5. üì¶ BACKUP & AUTOMATION
------------------------------------------------------------
# Create Project Backup (In VPS)
cd /var/www
tar -czvf pathchorcha-full-backup.tar.gz pathchorcha

# Download Backup to Local PC (Run from Local CMD/PowerShell)
scp root@72.61.114.217:/var/www/pathchorcha-full-backup.tar.gz .

# Run Deployment Script
bash deploy.sh


6. ‚ö†Ô∏è WARNING: DANGEROUS COMMANDS
------------------------------------------------------------
# Fully Reset Database (Will DELETE ALL DATA)
# Do NOT use unless strictly necessary
docker compose down -v 
============================================================


############### Cloudflare Pathchorcha setup ####################

###################################################################
                        Origin Code
###################################################################

-----BEGIN CERTIFICATE-----
MIIEqjCCA5KgAwIBAgIUcK5+U3gr9MRP9YUAx+cuCMDeSrQwDQYJKoZIhvcNAQEL
BQAwgYsxCzAJBgNVBAYTAlVTMRkwFwYDVQQKExBDbG91ZEZsYXJlLCBJbmMuMTQw
MgYDVQQLEytDbG91ZEZsYXJlIE9yaWdpbiBTU0wgQ2VydGlmaWNhdGUgQXV0aG9y
aXR5MRYwFAYDVQQHEw1TYW4gRnJhbmNpc2NvMRMwEQYDVQQIEwpDYWxpZm9ybmlh
MB4XDTI1MTIyODEwNTAwMFoXDTQwMTIyNDEwNTAwMFowYjEZMBcGA1UEChMQQ2xv
dWRGbGFyZSwgSW5jLjEdMBsGA1UECxMUQ2xvdWRGbGFyZSBPcmlnaW4gQ0ExJjAk
BgNVBAMTHUNsb3VkRmxhcmUgT3JpZ2luIENlcnRpZmljYXRlMIIBIjANBgkqhkiG
9w0BAQEFAAOCAQ8AMIIBCgKCAQEA3YLjkkl83fN/7hh80vb0yT4wZaLraj7ZBa/m
VKXU1LDKdeqnk+bQbM6ni/fQA5LrU0PGQmjUoVh5CNwU/1BM84SLkcRLHCPUS5g7
bLEF+cp/+4OlCf1H2Hgt1ZJjP5xlowgU6iIUzSUT77tk7HYsh2MZzyR/LJMlCNqs
mlbEdEMm821H7Bh4Bs6DJNLNWUSKV/sxqT5mDYxEe6sgtMXv3CPsyWs7gA5H88eG
PVSwwDiKgKkTQh3H3D+2YKZtFjh+ChnGuaAI5g3Jw2ULDf4Q8D2h8MqanIFv0wQ/
YLylLJ3PHKsZVlopv17mFL8Y1w2LIF+N5haseckjed6Zu/Q0DwIDAQABo4IBLDCC
ASgwDgYDVR0PAQH/BAQDAgWgMB0GA1UdJQQWMBQGCCsGAQUFBwMCBggrBgEFBQcD
ATAMBgNVHRMBAf8EAjAAMB0GA1UdDgQWBBTReKaZqReEdx/Hy9drAIfTnzVd6zAf
BgNVHSMEGDAWgBQk6FNXXXw0QIep65TbuuEWePwppDBABggrBgEFBQcBAQQ0MDIw
MAYIKwYBBQUHMAGGJGh0dHA6Ly9vY3NwLmNsb3VkZmxhcmUuY29tL29yaWdpbl9j
YTAtBgNVHREEJjAkghEqLnBhdGhjaG9yY2hhLmNvbYIPcGF0aGNob3JjaGEuY29t
MDgGA1UdHwQxMC8wLaAroCmGJ2h0dHA6Ly9jcmwuY2xvdWRmbGFyZS5jb20vb3Jp
Z2luX2NhLmNybDANBgkqhkiG9w0BAQsFAAOCAQEAtJDwQmgFdfHb5EvuVeU7Qw4I
XB2J5894Ut6/B+QNl9Fy7qCXJMT8EnoX/IvvrlBXrtM3zBySZMaqVHK5IIR+oAYj
4XIsvu6zYXD9CbrI52VbGWlaGsBDizqDi6QOSGWHdxXV3NuPJSP3AF/AXj9/bpDB
vzJyrELUKtUce/FQ3VNMmqVeEhVNwGTK/AFKJcABe7xbz8NV4b6huZJYJaNpF0RI
CaU2LWXHM4qDgjF4xD6zHcHBl3zxd0bAVBY6U3h41noAz6e4a5jyu0lfzjwvDc56
0V6a7C6JetWS3PoTVbtRmvXTKQpFsFra92YQ+MDZiKr5g2Z73KzP2sRCJcZDSg==
-----END CERTIFICATE-----



###################################################################
                         Private Code
###################################################################



-----BEGIN PRIVATE KEY-----
MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDdguOSSXzd83/u
GHzS9vTJPjBloutqPtkFr+ZUpdTUsMp16qeT5tBszqeL99ADkutTQ8ZCaNShWHkI
3BT/UEzzhIuRxEscI9RLmDtssQX5yn/7g6UJ/UfYeC3VkmM/nGWjCBTqIhTNJRPv
u2TsdiyHYxnPJH8skyUI2qyaVsR0QybzbUfsGHgGzoMk0s1ZRIpX+zGpPmYNjER7
qyC0xe/cI+zJazuADkfzx4Y9VLDAOIqAqRNCHcfcP7Zgpm0WOH4KGca5oAjmDcnD
ZQsN/hDwPaHwypqcgW/TBD9gvKUsnc8cqxlWWim/XuYUvxjXDYsgX43mFqx5ySN5
3pm79DQPAgMBAAECggEARlJGt8q/quCiNO6uNfUzie3FxIZfsSeJky4f87B/rBQB
+kRH9gK5GUnT0/IUpgXO0my6NJv+IMirB/6CZflSrJ5gBqMn6yOOwn7uIpfiW0YH
sku9KbowRE8G0f36pxeaBpNKvHecXfIO7bTymcT8ZvC1oVanTvnZsIFneUnhbTzK
9goSWV1qKgPJbksvpuSfTJEzyyc5qGwOJjfnuKpCdrfZ/gGYG4JjdX2snZp2x5Jl
Aiwlce3n1XwSJPHx5Wde7cmcYiBgMQX7bnjrhDVZVZX8WvBig7DGp1ahZtpwefO8
gKeW7qMCv7D1XHN8hsvDtWiVyRs8bNXJgYdLEADO4QKBgQD5SYeyQV11RH2ukCvP
I2wAaj9OgGHzao5/v2eC4kl21SxXjmu8j7r4X+lr7iux9yvDY29zhSfyTzbzSgxX
rKsMmvyqW4EfI8At6cVtepBBZicHJjmIedDNqmmUvYrCjOQPR7wT8i9aDjiPBJZO
Rf6kOW2qAzU2BTViNy6SolwsYQKBgQDjeeJuD0kIzrtFRqpUA61ifyqOIBs1e1gA
kYrdt+Je0aw3NTUtwLg4TiSRqKr0yAnvOc5wRdfFbWNs/N9JJ4Lk5ArUmV6djX2I
/n1K3ScT/vbXaoo2MVdK9jhbdvsW60v897xTYVNbF7eOck69CmOB2YxCYDalXXw7
FTZ+5HC2bwKBgCS1ylDaxVuGiYeSXZE0YywweUAjMcl50KBJXIHutujT/aKrK3xq
Iht/bE1jlnWvs3cjhn8ZhcduGOZ86hJjMBE8JacksIAYcK2SNmun1+R5mZe47lIF
tlUDGmc3/l4mB1OkubKqQITfgT62azf9oMEoX9jgfg6Fd9YN0ELxu+chAoGARH/U
jp3tuUg/nmncKrZ8xLdUgj3q050T7//j2EZiVXlAKdPM8r0g/FuTqYUoDdQbIb2/
i5GMmzgIg65WMrpCMVj2ZfTVSA5uag1wf1W/SccyX8YGXrFW/wzMBcb7b3hlhoS3
YkhhiIHI1Y1YZpa1RknTcb11VzCik0wc//MceeMCgYEAirmbcZYVh79vdkuQO5C9
CsIGQTQcoOVbMPuzBH7BWfYVxQyq4uUQlXNT0SE+wRhTNskMrK/vWTBjBqVQgW4k
41ADGYuMyng82hFQ6qQTLTWfvjrJfJVW0bkJOdOEGmmk936uGGbIicP3Qrd9G1CG
opPnyCMyW348bMD/XNbxD+c=
-----END PRIVATE KEY-----




